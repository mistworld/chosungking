# ğŸš¨ í˜„ì¬ ìƒí™© ë° ë¬¸ì œì  ì™„ì „ ì •ë¦¬

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”
- **í”„ë¡œì íŠ¸ ì´ë¦„**: ì´ˆì„±ì™• (ì‹¤ì‹œê°„ ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„)
- **ë°°í¬ ì „ëµ**: í•˜ì´ë¸Œë¦¬ë“œ
  - **Vercel**: ì •ì  íŒŒì¼ (HTML, CSS, JS, ì´ë¯¸ì§€, ì‚¬ìš´ë“œ)
  - **Cloudflare Workers**: API ì „ìš© (Durable Objects, KV Namespaces)

---

## âœ… Vercel ì„¤ì •

### ë°°í¬ ì •ë³´
- **Vercel URL**: `https://chosungking.vercel.app`
- **GitHub ë¦¬í¬**: `mistworld/chosungking` (ë˜ëŠ” `mistworld/chosung-scramble`)
- **ìƒíƒœ**: âœ… ë°°í¬ ì™„ë£Œ
- **ì‘ë™**: âœ… ê²Œì„ í™”ë©´ í‘œì‹œë¨

### ë¬¸ì œ
- API í˜¸ì¶œì´ Cloudflare Workersë¡œ ì—°ê²°ë˜ì–´ì•¼ í•˜ëŠ”ë° ì‹¤íŒ¨
- ë°© ìƒì„± ì‹¤íŒ¨: `TypeError: Failed to fetch`
- ë°© ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨: ë¹ˆ ë°°ì—´ ë°˜í™˜

---

## âš ï¸ Cloudflare Workers ì„¤ì •

### Worker ì •ë³´
- **Worker ì´ë¦„**: `steep-moon-7816`
- **Worker URL**: `https://steep-moon-7816.sucksuck1114.workers.dev`
- **ìƒíƒœ**: âœ… ë°°í¬ ì™„ë£Œ (2ì‹œê°„ ì „)
- **Routes**: âŒ "No production routes" (workers.devë§Œ ì‚¬ìš© ê°€ëŠ¥)

### ë°”ì¸ë”© ìƒíƒœ
- âœ… **KV Namespace**: `ROOM_LIST` (ID: fdd09a3f8360417b8b710dcbc0ad1d93)
- âœ… **KV Namespace**: `WORD_CACHE` (ID: c2668ae36bf64d74b174663e61f91d53)
- âœ… **Durable Objects**: `GAME_STATE` (Class: GameStateRoom)
- âœ… **Migrations**: ì ìš©ë¨ (tag: v1, new_classes: ["GameStateRoom"])

### ë¬¸ì œ
1. **workers.dev URLì´ ì‘ë‹µí•˜ì§€ ì•ŠìŒ**
   - `https://steep-moon-7816.sucksuck1114.workers.dev/api/rooms` ì ‘ì† ì‹œ ì‘ë‹µ ì—†ìŒ
   - ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†í•´ë„ ë¡œë”©ë§Œ ê³„ì†ë¨

2. **Routesê°€ ì„¤ì •ë˜ì§€ ì•ŠìŒ**
   - Dashboardì—ì„œ "No production routes" í‘œì‹œ
   - `workers_dev = true` ì„¤ì •ì€ ìˆì§€ë§Œ ì‹¤ì œë¡œ í™œì„±í™”ë˜ì§€ ì•ŠìŒ

---

## âš ï¸ Cloudflare Pages (ì—‰ëš±í•œ ë°°í¬)

### Pages í”„ë¡œì íŠ¸
- **ì´ë¦„**: `chosung-scramble`
- **URL**: `chosung-scramble.pages.dev`
- **ìƒíƒœ**: 1ì‹œê°„ ì „ ë°°í¬ë¨
- **ë¬¸ì œ**: âŒ ì´ê²ƒì€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í”„ë¡œì íŠ¸ì¸ë° Git pushë¡œ ìë™ ë°°í¬ë¨

### ë°°í¬ ë‚´ì—­
- 1h ago: "Update API URLs to Cloudflare Workers"
- GitHub: `mistworld/chosung-scramble`

**ì´ê²ƒì€ ì‚­ì œí•˜ê±°ë‚˜ ë¬´ì‹œí•´ì•¼ í•¨!**

---

## ğŸ”§ í˜„ì¬ íŒŒì¼ êµ¬ì¡°

### ë¡œì»¬ ê²½ë¡œ
```
C:\Users\ê¹€í˜„í¬ìœˆë„ìš°\Downloads\1130ì´ˆì„±ì™•\
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html  (ëª¨ë“  API URLì´ https://steep-moon-7816.sucksuck1114.workers.dev/api/ë¡œ ë³€ê²½ë¨)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ worker.js  (import { GameStateRoom } from './game-state-do.js')
â”‚   â””â”€â”€ game-state-do.js  (export class GameStateRoom)
â””â”€â”€ wrangler.toml  (name = "steep-moon-7816", workers_dev = true)
```

### wrangler.toml ì„¤ì •
```toml
name = "steep-moon-7816"
main = "src/worker.js"
compatibility_date = "2024-12-16"
workers_dev = true

[build]
command = ""

[[kv_namespaces]]
binding = "ROOM_LIST"
id = "fdd09a3f8360417b8b710dcbc0ad1d93"

[[kv_namespaces]]
binding = "WORD_CACHE"
id = "c2668ae36bf64d74b174663e61f91d53"

[[durable_objects.bindings]]
name = "GAME_STATE"
class_name = "GameStateRoom"

[[migrations]]
tag = "v1"
new_classes = ["GameStateRoom"]
```

---

## ğŸ› í•µì‹¬ ë¬¸ì œì 

### 1. Worker URLì´ ì‘ë‹µí•˜ì§€ ì•ŠìŒ
- **ì¦ìƒ**: `https://steep-moon-7816.sucksuck1114.workers.dev/api/rooms` ì ‘ì† ì‹œ ì‘ë‹µ ì—†ìŒ
- **ê°€ëŠ¥í•œ ì›ì¸**:
  - workers.dev routeê°€ ì‹¤ì œë¡œ í™œì„±í™”ë˜ì§€ ì•ŠìŒ
  - Worker ì½”ë“œì— ì—ëŸ¬ê°€ ìˆìŒ
  - ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ

### 2. Routes ì„¤ì • ëˆ„ë½
- Dashboardì—ì„œ "No production routes" í‘œì‹œ
- `workers_dev = true`ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•  ìˆ˜ ìˆìŒ
- Dashboardì—ì„œ ìˆ˜ë™ìœ¼ë¡œ í™œì„±í™” í•„ìš”í•  ìˆ˜ ìˆìŒ

### 3. ì˜ëª»ëœ Pages ë°°í¬
- `chosung-scramble` Pages í”„ë¡œì íŠ¸ì— ìë™ ë°°í¬ë¨
- ì´ê²ƒì€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í”„ë¡œì íŠ¸

---

## ğŸ” í™•ì¸ í•„ìš”í•œ ì‚¬í•­

### 1. Dashboard í™•ì¸
- **Cloudflare Dashboard** â†’ **Workers & Pages** â†’ **steep-moon-7816**
- **Settings** â†’ **Domains & Routes**
  - workers.dev ë¼ì¸ì´ ë³´ì´ëŠ”ì§€?
  - Active ìƒíƒœì¸ì§€?

### 2. API í…ŒìŠ¤íŠ¸
ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì ‘ì†:
```
https://steep-moon-7816.sucksuck1114.workers.dev/api/rooms
```
- JSON ì‘ë‹µì´ ë‚˜ì˜¤ëŠ”ì§€?
- ì—ëŸ¬ê°€ ë‚˜ëŠ”ì§€?
- ë¡œë”©ë§Œ ê³„ì†ë˜ëŠ”ì§€?

### 3. Worker ì½”ë“œ í™•ì¸
- Dashboard â†’ steep-moon-7816 â†’ **Edit code**
- ì½”ë“œê°€ 1370ì¤„ ì •ë„ ìˆëŠ”ì§€? (í†µí•© íŒŒì¼)
- ë˜ëŠ” src/worker.js + src/game-state-do.js ë¶„ë¦¬ íŒŒì¼?

---

## âœ… í•´ê²° ë°©ë²•

### ë°©ë²• 1: Dashboardì—ì„œ workers.dev í™œì„±í™”
1. Cloudflare Dashboard â†’ steep-moon-7816 Worker
2. Settings â†’ Domains & Routes
3. workers.dev ë¼ì¸ ì°¾ê¸°
4. í™œì„±í™” ë²„íŠ¼ í´ë¦­

### ë°©ë²• 2: ìƒˆ Worker ìƒì„±
- ì™„ì „íˆ ìƒˆë¡œìš´ Worker ì´ë¦„ìœ¼ë¡œ ì‹œì‘
- wranglerë¡œ ì²˜ìŒë¶€í„° ë°°í¬

### ë°©ë²• 3: ê¸°ì¡´ Worker ì¬ë°°í¬
- Dashboard ì½”ë“œ í™•ì¸
- wranglerë¡œ ë‹¤ì‹œ ë°°í¬í•˜ì—¬ routes í™œì„±í™”

---

## ğŸ“ í˜„ì¬ ì—ëŸ¬ ë¡œê·¸

```
[showRoomList] fetching https://steep-moon-7816.sucksuck1114.workers.dev/api/rooms
[rooms] ë°© ëª©ë¡ ë¹„ì–´ìˆìŒ, 500ms í›„ ì¬ì‹œë„... (1/3)
[rooms] ë°© ëª©ë¡ ë¹„ì–´ìˆìŒ, 1000ms í›„ ì¬ì‹œë„... (2/3)
[rooms] ë°© ëª©ë¡ ë¹„ì–´ìˆìŒ, 1500ms í›„ ì¬ì‹œë„... (3/3)
ë°© ìƒì„± ì‹¤íŒ¨: TypeError: Failed to fetch
```

**í•´ì„**: API URLë¡œ ìš”ì²­ì€ ê°€ì§€ë§Œ ì‘ë‹µì´ ì˜¤ì§€ ì•Šê±°ë‚˜, ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ (ìš°ì„ ìˆœìœ„)

1. **ì¦‰ì‹œ í™•ì¸**: Dashboardì—ì„œ workers.dev route í™œì„±í™” ì—¬ë¶€
2. **API í…ŒìŠ¤íŠ¸**: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ URL ì ‘ì† í…ŒìŠ¤íŠ¸
3. **Worker ì½”ë“œ í™•ì¸**: Dashboardì—ì„œ ì½”ë“œ ìƒíƒœ í™•ì¸
4. **ì¬ë°°í¬**: í•„ìš”ì‹œ wranglerë¡œ ì¬ë°°í¬

---

## ğŸ”— ì£¼ìš” URL

- **Vercel ê²Œì„**: https://chosungking.vercel.app
- **Cloudflare Worker API**: https://steep-moon-7816.sucksuck1114.workers.dev
- **API ì—”ë“œí¬ì¸íŠ¸ ì˜ˆì‹œ**:
  - ë°© ëª©ë¡: https://steep-moon-7816.sucksuck1114.workers.dev/api/rooms
  - ë°© ìƒì„±: https://steep-moon-7816.sucksuck1114.workers.dev/api/create-room
  - ê²Œì„ ìƒíƒœ: https://steep-moon-7816.sucksuck1114.workers.dev/api/game-state?roomId=XXX

---

## ğŸ’¡ ì°¸ê³  ì‚¬í•­

- Cloudflare ë¬´ë£Œ í”Œëœ ì‚¬ìš© ì¤‘
- Vercel ë°°í¬ëŠ” ì •ìƒ ì‘ë™
- ë¬¸ì œëŠ” Cloudflare Workers API ì—°ê²°ë§Œ í•´ê²°í•˜ë©´ ë¨
- DO, KV ë°”ì¸ë”©ì€ ëª¨ë‘ ì™„ë£Œë¨ (ë°°í¬ ì‹œ í™•ì¸ë¨)



